(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(t,e,i){"use strict";i.r(e);var r,n=i(0),o=i(11),s=(i(64),i(132)),a=i(128);if("undefined"===typeof window.localStorage||null===window.localStorage){var l={getItem:function(t){return r[t]},setItem:function(t,e){r[t]=e.toString()},clear:function(){r={}},removeItem:function(t){delete r[t]}};Object.defineProperty(window,"localStorage",{value:l})}var u,c=function(t,e,i){try{t.setItem(e,i)}catch(r){}},m=function(t,e){try{return t.getItem(e)}catch(i){return null}},p=i(127),h=i(134),d=i(129),f=(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),y=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},T=function(t){function e(e){var i=t.call(this,e)||this;return i.formOptions=function(t){return n.createElement("option",{key:t,value:t},1===t.toString().length?"0"+t:t)},i.state=y({},i.initialState()),i.updateEntry=i.updateEntry.bind(i),i.submitEntry=i.submitEntry.bind(i),i.resetState=i.resetState.bind(i),i}return f(e,t),e.prototype.initialState=function(){return{entryTitle:"",entryPresetTargetTime:0,entryHours:0,entryMinutes:0,entryCycleSelect:0,active:!1}},e.prototype.resetState=function(){var t=Object.assign({},y({},this.state),y({},this.initialState()));this.setState(t)},e.prototype.updateEntry=function(t){var e;switch(t.currentTarget.name){case"entryTitle":e=t.currentTarget.value,this.setState({entryTitle:e});break;case"entryHours":e=parseInt(t.currentTarget.value,10),this.setState({entryHours:e});break;case"entryMinutes":e=parseInt(t.currentTarget.value,10),this.setState({entryMinutes:e});break;case"entryCycleSelect":e=parseInt(t.currentTarget.value,10),this.setState({entryCycleSelect:e})}},e.prototype.submitEntry=function(t){if(t.preventDefault(),"string"!==typeof this.state.entryTitle||0===this.state.entryTitle.length)throw new Error("A [Title] is required");if("number"!==typeof this.state.entryHours||"number"!==typeof this.state.entryMinutes||this.state.entryHours<0||this.state.entryHours>=this.props.countHours||this.state.entryMinutes<0||this.state.entryMinutes>=this.props.countMinutes)throw new Error("Invalid time set: It should be [0-"+(this.props.countHours-1)+"]:[0-"+(this.props.countMinutes-1)+"]");if("number"!==typeof this.state.entryCycleSelect||this.state.entryCycleSelect<0||this.state.entryCycleSelect>=this.props.entryCycleList.length)throw new Error("Invalid Cycle: It should be one of ["+this.props.entryCycleList.slice()+"]");this.props.setTimer(this.state.entryTitle,this.state.entryPresetTargetTime,this.state.entryHours,this.state.entryMinutes,this.state.entryCycleSelect),this.resetState()},e.prototype.render=function(){var t=this,e=function(e,i){void 0===i&&(i=1);for(var r=[],n=0;n<e;n+=i)r.push(t.formOptions(n));return r},i=e(this.props.countHours),r=e(this.props.countMinutes,this.props.stepCountMinutes),o={required:!0,onChange:this.updateEntry},s=this.state.entryTitle,l=this.props.titleCount-(s?s.length:0);return n.createElement(p.a,{onSubmit:this.submitEntry,horizontal:!0},n.createElement("h2",{className:"hidden"},"Create a Timer"),n.createElement(h.a,{controlId:"formHorizontalTimerTitle"},n.createElement(a.a,{xs:5,sm:4,md:5,componentClass:d.a},"Timer Title ",n.createElement("small",null,"(",l," chars)")),n.createElement(a.a,{xs:7,sm:8,md:7},n.createElement("input",y({type:"text",id:"entryTitle",name:"entryTitle"},o,{value:this.state.entryTitle,placeholder:this.props.titleTemp,maxLength:this.props.titleCount,size:this.props.titleCount,autoFocus:!0})))),n.createElement(h.a,{controlId:"formHorizontalTimerTime",className:"formHorizontalTimerTime"},n.createElement(a.a,{xs:5,sm:4,md:5,componentClass:d.a},"Time ",n.createElement("small",null,"(hrs/ mins/ cycle)")),n.createElement(a.a,{xs:7,sm:8,md:7},n.createElement("label",{style:{display:"none"}},"Time ",n.createElement("small",null,"(hrs/ mins/ cycle)")),n.createElement("select",y({id:"entryTimeHr",name:"entryHours","data-type":"number"},o,{value:this.state.entryHours,size:1}),i),n.createElement("label",{style:{display:"none"}},"Minutes"),n.createElement("select",y({id:"entryTimeMin",name:"entryMinutes","data-type":"number"},o,{value:this.state.entryMinutes,size:1}),r),n.createElement("label",{style:{display:"none"}},"Cycle"),n.createElement("select",y({id:"entryTimeCycle",name:"entryCycleSelect","data-type":"number"},o,{value:this.state.entryCycleSelect,size:1}),this.props.entryCycleList.map(function(t,e){return n.createElement("option",{key:e,value:e},t)})))),n.createElement(h.a,null,n.createElement(a.a,{xsOffset:5,xs:7,smOffset:4,sm:8,mdOffset:5,md:7,className:"add-button-div"},n.createElement("div",{className:"label hidden"},"Add It!!!"),n.createElement("button",{id:"entryButton",className:"btn"},"Add Your Timer"))))},e}(n.Component),g=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),v=function(t){function e(e){var i=t.call(this,e)||this;return i.state={snoozeTime:i.props.snoozeTime},i.updateSnooze=i.updateSnooze.bind(i),i.setLocalSnooze=i.setLocalSnooze.bind(i),i}return g(e,t),e.prototype.setLocalSnooze=function(t){this.setState({snoozeTime:parseInt(t.currentTarget.value,10)},this.updateSnooze)},e.prototype.updateSnooze=function(){this.props.setSnooze(this.state.snoozeTime)},e.prototype.render=function(){return n.createElement("select",{onChange:this.setLocalSnooze,value:this.state.snoozeTime},Array.from(Array(15),function(t,e){return e+1}).map(function(t,e){return n.createElement("option",{key:e},t)}))},e}(n.Component),b=i(131),w=i(130),E=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),S=function(t){function e(e){var i=t.call(this,e)||this;return i.state={secondsElapsed:0,interval:-1,tTimeDisplay:""},i.tick=i.tick.bind(i),i}return E(e,t),e.prototype.tick=function(){var t,e,i,r,n,o=!1;0===this.props.targetTime?this.setState({tTimeDisplay:""}):(t=this.props.targetTime-Date.now(),r=parseInt((t/1e3%60).toString(),10),i=(i=parseInt((t/6e4%60).toString(),10))<=0?0:i,r=r<=0?0:r,o=0===(e=(e=parseInt((t/36e5).toString(),10))<=0?0:e)&&0===i||this.props.showSeconds,e=e<10?"0"+e:e,i=i<10?"0"+i:i,r=r<10?"0"+r:r,n=o?e+":"+i+":"+r:e+":"+i,this.setState({tTimeDisplay:n}))},e.prototype.componentDidMount=function(){this.setState({interval:window.setInterval(this.tick,1e3)})},e.prototype.componentWillUnmount=function(){clearInterval(this.state.interval)},e.prototype.render=function(){return n.createElement("span",{className:"nowrap"},this.state.tTimeDisplay.length>0?"T-"+this.state.tTimeDisplay:"")},e}(n.Component),L=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),x=function(t){function e(e){var i=t.call(this,e)||this;return i.toggleTimeout=i.toggleTimeout.bind(i),i.removeTimer=i.removeTimer.bind(i),i.toggleTimeout=i.toggleTimeout.bind(i),i.removeTimer=i.removeTimer.bind(i),i}return L(e,t),e.prototype.toggleTimeout=function(){this.props.toggleTimeout(this.props.entry.id,this.props.entry.active?"off":"on")},e.prototype.removeTimer=function(){this.props.removeTimer(this.props.entry.id)},e.prototype.render=function(){var t,e=this,i=this.props.timeoutList.find(function(t){return t.id===e.props.entry.id}),r=i?this.props.timerDisplayList.find(function(t){return t.id===i.timer}):null,o=r?r.destination:0,s="x2b-"===this.props.entry.title.substr(0,4),a=n.createElement("small",{style:{opacity:.5}},"This is a\xa0",n.createElement("a",{href:"https://kdcinfo.github.io/done-for-now/",target:"kdcNewWindow"},"Done (for now)")," timer");return t=s?n.createElement(n.Fragment,null,n.createElement("td",null,this.props.entry.title),n.createElement("td",null,this.props.entry.timeOfDay),n.createElement("td",{className:"hidden"},this.props.entryCycleList[this.props.entry.cycle])):n.createElement(n.Fragment,null,n.createElement("td",null,this.props.entry.title),n.createElement("td",{colSpan:2},a)),n.createElement("tr",null,t,n.createElement("td",{className:"hidden text-center"},n.createElement("input",{onChange:this.toggleTimeout,type:"checkbox",value:this.props.entry.id,checked:this.props.entry.active})),n.createElement("td",{className:"text-center"},n.createElement(S,{targetTime:o,showSeconds:this.props.showSeconds})),n.createElement("td",{className:"hidden"},n.createElement("button",{className:"btn btn-xs",onClick:this.removeTimer},n.createElement(w.a,{glyph:"remove"}))))},e}(n.Component),I=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),C=function(t){function e(e){var i=t.call(this,e)||this;return i.state={showAppLinks:""},i.toggleOurApps=i.toggleOurApps.bind(i),i}return I(e,t),e.prototype.toggleOurApps=function(){var t=0===this.state.showAppLinks.length?" showdown":"";this.setState({showAppLinks:t})},e.prototype.render=function(){var t=this;return this.props.timerList.length>0?n.createElement("div",{className:"timers-div"},n.createElement(b.a,{responsive:!0},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,n.createElement("span",null,"Internal Alarm ID "),n.createElement("sup",{className:"ourAppsTrigger",onClick:this.toggleOurApps},"?"),n.createElement("div",{className:"ourAppsDisplay"+this.state.showAppLinks},n.createElement("div",null,n.createElement("span",null,n.createElement("a",{href:"https://KDCinfo.github.io/expired-to-be/",onClick:function(t){return t.preventDefault(),!1}},"Expired To Be")," (Alarms)"),n.createElement("br",null),n.createElement("span",null,n.createElement("a",{href:"https://kdcinfo.github.io/done-for-now/",target:"kdcNewWindow"},"Done (for now)")," (Timers)")))),n.createElement("th",null,"Notify Time"),n.createElement("th",{className:"hidden"},"Cycle"),n.createElement("th",{className:"hidden"},"On/Off"),n.createElement("th",{className:"text-center"},"Hrs:Mins Left"),n.createElement("th",{className:"hidden"},"Del"))),n.createElement("tbody",null,this.props.timerList.map(function(e,i){return n.createElement(x,{key:i,entry:e,timeoutList:t.props.timeoutList,timerDisplayList:t.props.timerDisplayList,entryCycleList:t.props.entryCycleList,toggleTimeout:t.props.toggleTimeout,removeTimer:t.props.removeTimer,showSeconds:t.props.showSeconds})})))):n.createElement("div",{className:"timer-list-no-alarms"},"You have no active alarms...")},e}(n.Component),D=i(135),O=i(133),M=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},z=function(t){function e(e){var i=t.call(this,e)||this;return i.timerSnooze=i.timerSnooze.bind(i),i.timerReset=i.timerReset.bind(i),i.timerDisable=i.timerDisable.bind(i),i}return M(e,t),e.prototype.shouldComponentUpdate=function(t,e){return this.props!==t},e.prototype.timerSnooze=function(){this.props.timerSnooze(this.props.modalTimerId)},e.prototype.timerReset=function(){this.props.timerReset(this.props.modalTimerId)},e.prototype.timerDisable=function(){this.props.timerDisable(this.props.modalTimerId)},e.prototype.render=function(){var t=this,e=this.props,i=e.show,r=e.modalTitle,o="",s="",a=!1,l=r,u=this.props.timerList.find(function(e){return e.id===t.props.modalTimerId});u&&(s=u.timeOfDay,o=this.props.entryCycleList[u.cycle],0===u.presetTargetTime?a=!0:l=this.props.alarmMsg);var c={show:i,className:"modal-alert",onHide:function(){}};return n.createElement(O.a,_({},c),n.createElement(O.a.Body,null,a?n.createElement(function(){return n.createElement(D.a,{onClick:t.timerSnooze,bsStyle:"warning"},"Snooze ",n.createElement("small",null,n.createElement("small",null,"(",t.props.snoozeTime," min)")))},null):null,a?n.createElement(function(){return n.createElement("div",{className:"modal-title"},l)},null):null,a?n.createElement(function(){return n.createElement(D.a,{onClick:t.timerReset,bsStyle:"success"},"Done ",n.createElement("small",null,n.createElement("small",null,"(for now)")))},null):null,a?null:n.createElement(function(){return n.createElement(D.a,{onClick:t.props.resetModal,bsStyle:"success"},"Expiration Alert!")},null),a?n.createElement(function(){return n.createElement("div",{className:"modal-subtitle"},"[",s,"]\xa0[",o,"]")},null):null,a?n.createElement(function(){return n.createElement(D.a,{onClick:t.timerDisable,bsStyle:"default"},"Disable")},null):null))},e}(n.Component),A=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),N=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},k=function(t){function e(e){var i=t.call(this,e)||this,r=m(localStorage,"snoozeTime"),n=r?parseInt(r,10):1440,o=m(localStorage,"showSeconds"),s=!!o&&"true"===o.toLocaleLowerCase(),a=m(localStorage,"timerList"),l=a?JSON.parse(a):[];return i.state={timerList:l,timeoutList:[],timeoutQueue:[],timerDisplayList:[],titleCount:25,titleTemp:"Watch my show!",countHours:24,countMinutes:60,stepCountMinutes:5,snoozeTime:n,entryCycleList:["daily","hourly","every minute"],showModal:!1,modalTitle:"",modalTimerId:-1,showSeconds:s,currentTimerId:0,alarmMsg:"An alarm has expired.",timeoutMax:20736e5},i.setSnooze=i.setSnooze.bind(i),i.setTimer=i.setTimer.bind(i),i.setTimerCallback=i.setTimerCallback.bind(i),i.updateTimer=i.updateTimer.bind(i),i.addRemoveTimeout=i.addRemoveTimeout.bind(i),i.toggleTimeout=i.toggleTimeout.bind(i),i.removeTimer=i.removeTimer.bind(i),i.getLastId=i.getLastId.bind(i),i.deleteTimeout=i.deleteTimeout.bind(i),i.createTimeout=i.createTimeout.bind(i),i.timerSnooze=i.timerSnooze.bind(i),i.timerReset=i.timerReset.bind(i),i.timerDisable=i.timerDisable.bind(i),i.showNotification=i.showNotification.bind(i),i.getTimeDiff=i.getTimeDiff.bind(i),i.getTimeDiffUpdate=i.getTimeDiffUpdate.bind(i),i.addToTimeoutQueue=i.addToTimeoutQueue.bind(i),i.removeFromTimeoutQueue=i.removeFromTimeoutQueue.bind(i),i.checkTimeoutQueue=i.checkTimeoutQueue.bind(i),i.setNotification=i.setNotification.bind(i),i.resetModal=i.resetModal.bind(i),i}return A(e,t),e.prototype.initializeState=function(){var t=this,e=m(localStorage,"timerList"),i=e?JSON.parse(e):[];i.length>0&&(this.props.setAlarms(i),i.forEach(function(e){!0===e.active&&"undefined"!==typeof e.timeOfDay&&window.setTimeout(function(){t.addRemoveTimeout(e.id,"init")},0)}))},e.prototype.componentDidMount=function(){this.initializeState()},e.prototype.componentWillReceiveProps=function(t){var e=this;if(t.ourExpirationItems.length>0){if(t.ourExpirationItems[0].expiredId!==this.state.currentTimerId){var i=t.ourExpirationItems[0].expiredId;this.setState({currentTimerId:i},function(){e.handleAppUpdate()})}}else this.setState({currentTimerId:0})},e.prototype.shouldComponentUpdate=function(t,e){return t.ourExpirationItems.length>0?0===this.state.currentTimerId||this.state.currentTimerId!==t.ourExpirationItems[0].expiredId:this.props!==t||this.state.showModal!==e.showModal||this.state.timeoutList!==e.timeoutList},e.prototype.handleAppUpdate=function(){if(this.props.ourExpirationItems.length>0){var t=this.props.ourExpirationItems[0],e=t.whichEvent,i=t.expiredId,r=e,n=0,o=this.state.timerList.find(function(t){return parseInt(t.title.substr(4),10)===i}),s="",a=0,l=0,u=0,c=0;switch(o&&(n=o.id),"add"===r&&(s=this.props.ourExpirationItems[0].entryTitle,a=this.props.ourExpirationItems[0].entryPresetTargetTime,l=this.props.ourExpirationItems[0].entryHours,u=this.props.ourExpirationItems[0].entryMinutes,c=this.props.ourExpirationItems[0].entryCycle,o&&(r="update")),r){case"add":this.setTimer(s,a,l,u,c);break;case"update":this.updateTimer(n,s,a,l,u,c);break;case"remove":this.removeTimer(n);break;case"clearall":this.removeAllTimers()}}},e.prototype.updateTimer=function(t,e,i,r,n,o){var s=this,a=this.state.timerList,l={id:t,title:e,presetTargetTime:i,timeOfDay:(r<10?"0"+r:r)+":"+(n<10?"0"+n:n),cycle:o,active:!0},u=a.findIndex(function(e){return e.id===t});a.splice(u,1,l),this.setState({timerList:a},function(){c(localStorage,"timerList",JSON.stringify(a)),s.updateTimerCallback(t),s.props.setAlarms(s.state.timerList)})},e.prototype.setTimer=function(t,e,i,r,n){var o=this,s=i<10?"0"+i:i,a=r<10?"0"+r:r,l=this.getLastId(),u=0===this.state.timerList.length?0:l+1,m=this.state.timerList.concat({id:u,title:t,presetTargetTime:e,timeOfDay:s+":"+a,cycle:n,active:!1});this.setState({timerList:m},function(){c(localStorage,"timerList",JSON.stringify(m)),o.setTimerCallback(),o.props.setAlarms(o.state.timerList)})},e.prototype.removeAllTimers=function(){var t=this,e=this.state.timerList.slice();e=e.filter(function(e){return t.toggleTimeout(e.id,"off"),"x2b-"!==e.title.substr(0,4)}),this.setState({timerList:e},function(){c(localStorage,"timerList",JSON.stringify(e)),t.props.setAlarms(t.state.timerList),t.props.refreshAlarms()})},e.prototype.removeTimer=function(t,e){var i=this,r=this.state.timerList,n=r.findIndex(function(e){return e.id===t});n>=0&&(r.splice(n,1),this.setState({timerList:r},function(){c(localStorage,"timerList",JSON.stringify(r)),i.toggleTimeout(t,"off"),!0===e&&(i.props.setAlarms(i.state.timerList),i.props.refreshAlarms())}))},e.prototype.addRemoveTimeout=function(t,e){var i=t;"remove"===e?this.deleteTimeout(i):"update"===e?this.updateTimeout(i):"snooze"===e?this.updateTimeout(i,!0):this.createTimeout(i)},e.prototype.deleteTimeout=function(t,e){var i,r=this.state.timeoutList.slice(),n=this.state.timerDisplayList;r.forEach(function(e,n){e.id===t&&(i=e.timer,r.splice(n,1),window.clearTimeout(e.timer))}),this.setState({timeoutList:r}),n.forEach(function(t,e){t.id===i&&(n.splice(e,1),window.clearTimeout(i))}),this.setState({timerDisplayList:n})},e.prototype.createTimeout=function(t){var e,i,r,n,o,s=this,a=this.state.timerList.find(function(e){return e.id===t}),l=a.presetTargetTime,u=parseInt(a.timeOfDay.split(":")[0],10),c=parseInt(a.timeOfDay.split(":")[1],10),m=a.cycle,p=this.state.timeoutList,h=this.state.timerDisplayList;o=(n=0===l?this.getTimeDiff(u,c,m):l-Date.now())>this.state.timeoutMax?this.state.timeoutMax:n,r={id:e=window.setTimeout(function(){s.addToTimeoutQueue(t)},o),destination:Date.now()+n},h=h.concat(r),this.setState({timerDisplayList:h}),i={id:t,timer:e},p=p.concat(i),this.setState({timeoutList:p})},e.prototype.updateTimeout=function(t,e){var i,r,n,o=this,s=this.state.timerList.find(function(e){return e.id===t}),a=s.presetTargetTime,l=parseInt(s.timeOfDay.split(":")[0],10),u=parseInt(s.timeOfDay.split(":")[1],10),c=s.cycle;i=0===a?this.getTimeDiff(l,u,c):a-Date.now(),n=(r=e?60*this.state.snoozeTime*1e3:i)>this.state.timeoutMax?this.state.timeoutMax:r;for(var m,p,h=this.state.timeoutList,d=0;d<h.length;d++)if(h[d].id===t){p=h[d].timer,clearTimeout(p);break}m=window.setTimeout(function(){o.addToTimeoutQueue(t)},n),h=h.map(function(e,i){return e.id===t&&(e.timer=m),e}),this.setState({timeoutList:h});var f,y=this.state.timerDisplayList;f=Date.now()+r,y=y.map(function(t){return t.id===p&&(t.id=m,t.destination=f),t}),this.setState({timerDisplayList:y})},e.prototype.addToTimeoutQueue=function(t){var e,i=this.state.timerList.find(function(e){return e.id===t}),r=i.presetTargetTime,n=parseInt(i.timeOfDay.split(":")[0],10),o=parseInt(i.timeOfDay.split(":")[1],10),s=i.cycle;if(((e=0===r?this.getTimeDiff(n,o,s):r-Date.now())>this.state.timeoutMax?this.state.timeoutMax:e)>0)this.createTimeout(t);else{var a=this.state.timeoutQueue;a.push(t),this.setState({timeoutQueue:a},this.checkTimeoutQueue)}},e.prototype.removeFromTimeoutQueue=function(t){var e=this.state.timeoutQueue;e.forEach(function(i,r){i===t&&e.splice(r,1)}),this.setState({timeoutQueue:e},this.checkTimeoutQueue)},e.prototype.checkTimeoutQueue=function(){var t=this.state.timeoutQueue;t.length>0&&this.setNotification(t[0])},e.prototype.setNotification=function(t){var e=this,i=this.state.timerList.find(function(e){return e.id===t});i&&this.setState({modalTitle:i.title,modalTimerId:i.id},function(){return e.showNotification(t)})},e.prototype.getTimeDiffUpdate=function(t,e,i){var r=new Date,n=r.getDate(),o=t,s=e,a=0,l=0,u=0,c=r.getMinutes();return r.setMilliseconds(0),r.setSeconds(0),0===i?(r.setMinutes(s,0,0),r.setHours(o),a=n===r.getDate()?1:r.getDate()+1):1===i?(r.setMinutes(s,0,0),s<=c&&(l=1)):2===i&&(u=1),r.setMinutes(r.getMinutes()+u),r.setHours(r.getHours()+l),r.setDate(r.getDate()+a),r.getTime()-(new Date).getTime()},e.prototype.getTimeDiff=function(t,e,i){var r=t,n=e,o=new Date,s=0,a=0,l=o.getMinutes();return o.setMilliseconds(0),o.setSeconds(0),n<o.getMinutes()?s=n-o.getMinutes()+60:n===o.getMinutes()?s=0===i||1===i?0:1:n>o.getMinutes()&&(s=n-o.getMinutes()),o.setMinutes(o.getMinutes()+s),r<o.getHours()?a=r-o.getHours()+24:r===o.getHours()?a=n===l&&0===i?24:0:r>o.getHours()&&(a=r-o.getHours()),a+=r,o.setHours(o.getHours()+a),o.getTime()-(new Date).getTime()},e.prototype.toggleTimeout=function(t,e){var i=this;if("on"===e?this.addRemoveTimeout(t,"add"):"off"===e?this.addRemoveTimeout(t,"remove"):"snooze"===e?this.addRemoveTimeout(t,"snooze"):this.addRemoveTimeout(t,"update"),"update"!==e&&"snooze"!==e){var r=this.state.timerList.map(function(i,r){return i.id===t&&(i.active="on"===e),i});this.setState({timerList:r},function(){c(localStorage,"timerList",JSON.stringify(r)),i.props.setAlarms(i.state.timerList)})}},e.prototype.timerSnooze=function(t){var e=this;this.setState({showModal:!1},function(){e.removeFromTimeoutQueue(t),e.toggleTimeout(t,"snooze")})},e.prototype.timerReset=function(t){var e=this,i=t||this.state.modalTimerId;this.setState({showModal:!1},function(){e.removeFromTimeoutQueue(i),0===e.state.timerList.find(function(t){return t.id===i}).presetTargetTime?e.toggleTimeout(i,"update"):e.removeTimer(i,!0)})},e.prototype.timerDisable=function(t){this.timerReset(t)},e.prototype.setSnooze=function(t){this.setState({snoozeTime:t},function(){c(localStorage,"snoozeTime",t.toString())})},e.prototype.showNotification=function(t){var e=this;this.props.updatePassiveNotification(),"modals"===this.props.prefs.prefNotification?(this.timerReset(t),this.setState({showModal:!0})):"alerts"===this.props.prefs.prefNotification?(this.timerReset(t),setTimeout(function(){alert(e.state.alarmMsg)},100)):"notifications"===this.props.prefs.prefNotification?(this.timerReset(t),this.props.triggerAlarm(t)):this.timerReset(t)},e.prototype.resetModal=function(){this.setState({showModal:!1})},e.prototype.render=function(){var t={titleCount:this.state.titleCount,titleTemp:this.state.titleTemp,countHours:this.state.countHours,countMinutes:this.state.countMinutes,stepCountMinutes:this.state.stepCountMinutes,entryCycleList:this.state.entryCycleList,setTimer:this.setTimer},e="field-col settings-form-col "+(""+(!1===this.props.prefs.allowTimers&&"hidden"));return!0===this.props.prefs.showPanel?n.createElement("div",null,n.createElement("main",{className:"content"},this.props.children,n.createElement(s.a,{className:"show-grid"},n.createElement(a.a,{xs:12,sm:5,md:5,className:e},n.createElement(T,N({},t))),n.createElement(a.a,{xsOffset:1,xs:10,smOffset:0,sm:7,md:7,className:"field-col timer-list"},n.createElement(C,{removeTimer:this.removeTimer,toggleTimeout:this.toggleTimeout,timerList:this.state.timerList,timeoutList:this.state.timeoutList,timerDisplayList:this.state.timerDisplayList,entryCycleList:this.state.entryCycleList,showSeconds:this.state.showSeconds}))),n.createElement("ul",{className:e},n.createElement("li",{className:"padTopLi2"},n.createElement("span",{className:"timer-options"},"[Setting]"),"\xa0 Snooze delay time (in minutes; for future snoozes):\xa0",n.createElement(v,{snoozeTime:this.state.snoozeTime,setSnooze:this.setSnooze})),n.createElement("li",{className:"padTopLi"},"When a timer is created, the timer will be initially set to the next available time from when the time is set based on the 'cycle' selection.")),n.createElement(z,{show:this.state.showModal,timerList:this.state.timerList,entryCycleList:this.state.entryCycleList,modalTimerId:this.state.modalTimerId,modalTitle:this.state.modalTitle,timerReset:this.timerReset,timerDisable:this.timerDisable,timerSnooze:this.timerSnooze,snoozeTime:this.state.snoozeTime,alarmMsg:this.state.alarmMsg,resetModal:this.resetModal}))):n.createElement("div",null,n.createElement(z,{show:this.state.showModal,timerList:this.state.timerList,entryCycleList:this.state.entryCycleList,modalTimerId:this.state.modalTimerId,modalTitle:this.state.modalTitle,timerReset:this.timerReset,timerDisable:this.timerDisable,timerSnooze:this.timerSnooze,snoozeTime:this.state.snoozeTime,alarmMsg:this.state.alarmMsg,resetModal:this.resetModal}))},e.prototype.getLastId=function(){return this.state.timerList.reduce(function(t,e){return e.id>t?e.id:t},0)},e.prototype.setTimerCallback=function(){var t=this.getLastId();this.toggleTimeout(t,"on")},e.prototype.updateTimerCallback=function(t){this.toggleTimeout(t,"update")},e}(n.Component),P=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),H=function(t,e,i,r){return new(i||(i=Promise))(function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(s,a)}l((r=r.apply(t,e||[])).next())})},j=function(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e.prototype.render=function(){return n.createElement("div",{className:"appz"},n.createElement(k,{ourExpirationItems:this.props.ourExpirationItems,setAlarms:this.props.setAlarms,refreshAlarms:this.props.refreshAlarms,prefs:this.props.prefs,triggerAlarm:this.props.triggerAlarm,updatePassiveNotification:this.props.updatePassiveNotification}))},e}(n.Component);window.reRender=function(){o.render(n.createElement(R,{ourExpirationItems:window.ourExpirations.currentItems(),setAlarms:window.ourExpirations.setAlarms,refreshAlarms:window.ourExpirations.refreshAlarms,prefs:window.ourExpirations.getPrefs(),triggerAlarm:window.ourExpirations.triggerAlarm,updatePassiveNotification:window.ourExpirations.updatePassiveNotification}),document.getElementById("root"))};var Q=function(){var t=document.getElementById("web-root");function e(t){return H(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,fetch(t,{method:"GET"})];case 1:return[4,e.sent().text()];case 2:return[2,e.sent()]}})})}var i=new DOMParser,r=function(){var r=document.querySelector(".input-options");e("extensions/chrome/x2b-prefs.html").then(function(e){var n,o,s,a,l=e.trim(),u=i.parseFromString(l,"text/html"),c=u.querySelectorAll(".x2b")[0],m=u.querySelectorAll(".x2b")[1];r.appendChild(c),r.appendChild(m),(n=document.createElement("script")).src="extensions/chrome/x2b-prefs.js",n.async=!1,t.appendChild(n),o=document.querySelector("#topBox h1"),s=o.parentNode,a=i.parseFromString('<div id="webapp-help">\n                  <button type="button" id="button-toggle-webapp-help">About this App</button>\n                  <div id="app-message">\n                    <p>This web app allows for the setting and reminders for \'things that expire\'.</p>\n                    <p>In order for the alarm notifications to work, this browser tab should remain open;\n                      but you can continue your browsing activities in other tabs.</p>\n                    <p>If you would prefer to always have it on without having to keep a browser tab open,\n                      you can also run this as a <a\n                        href="https://chrome.google.com/webstore/detail/expired-to-be/kamjiblbgmiobifooelpmlkojmadmcan"\n                      >Chrome browser extension</a>.</p>\n                  </div>\n                </div>',"text/html"),s.insertBefore(a.getElementById("webapp-help"),o.nextSibling)}).catch(function(t){console.log("And the --X2B-- catch(e) error is:"),console.error(t)})};e("extensions/chrome/popup.html").then(function(e){var n,o=e.indexOf("<body>")+6,s=e.indexOf("<script")-1,a=e.substring(o,s).trim(),l=i.parseFromString(a,"text/html");t.appendChild(l.querySelector("div")),(n=document.createElement("script")).src="extensions/chrome/popup.js",n.async=!1,t.appendChild(n),r()}).catch(function(t){console.log("And the catch(e) error is:"),console.error(t)})};setTimeout(function(){Q()},100)},58:function(t,e,i){t.exports=i(126)},64:function(t,e,i){}},[[58,2,1]]]);
//# sourceMappingURL=main.eadf2f55.chunk.js.map